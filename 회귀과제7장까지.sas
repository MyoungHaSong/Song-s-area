symbol v=dot h=.8 c=blue;
proc reg data = p134;
  model jperf = test;
  plot student.*test;
run;
quit;
data p159;
input Age Height Weight Sex ;
cards;
19  	61  	180  	0  
19  	70  	160  	0  
19  	70  	135  	0  
19  	71  	195  	0  
19  	64  	130  	1  
19  	64  	120  	1  
21  	69  	135  	1  
19  	67  	125  	0  
19  	62  	120  	1  
20  	66  	145  	0  
19  	65  	155  	0  
19  	69  	135  	1  
19  	66  	140  	0  
19  	63  	120  	1  
19  	69  	140  	0  
18  	66  	113  	1  
18  	68  	180  	0  
19  	72  	175  	0  
19  	70  	169  	0  
19  	74  	210  	0  
20  	66  	104  	1  
20  	64  	105  	1  
20  	65  	125  	1  
20  	71  	120  	1  
19  	69  	119  	1  
20  	64  	140  	1  
20  	67  	185  	1  
19  	60  	110  	1  
20  	66  	120  	1  
19  	71  	175  	0  
19  	65  	135  	1 
19  	70  	120  	0 
21  	69  	142  	0 
20  	63  	108  	1 
19  	63  	118  	1 
20  	72  	135  	0 
19  	73  	169  	0 
19  	69  	145  	0 
27  	69  	130  	1 
18  	64  	135  	0 
20  	61  	115  	1 
19  	68  	140  	0 
21  	70  	152  	0 
19  	64  	118  	1 
19  	62  	112  	1 
19  	64  	100  	1 
20  	67  	135  	1 
20  	63  	110  	1 
20  	68  	135  	0 
18  	63  	115  	1 
19  	68  	145  	0 
19  	65  	115  	1 
19  	63  	128  	1 
20  	68  	140  	1 
19  	69  	130  	0 
19  	69  	165  	0 
19  	69  	130  	0 
20  	70  	180  	0 
28  	65  	110  	1 
19  	55  	155  	0 
;
run;

proc print data = p159;
run;

data p1591;
set p159;
interact = sex * height ;
run;


proc reg data = p1591;
FM : model Weight = Height Sex interact ;
test : test sex = 0 , interact = 0 ;
run; 

proc reg data = p159;
model Weight = Height Sex;
run;

proc sort data = p159;
by sex;
run;
proc reg data = p159;
model Weight = height ;
by sex;
run;
* age를 넣고 돌린 회귀 모델 ;
proc reg data = p159;
model Weight = height sex age;
run;

data p011 ; 
input Bowl Casserole Dish Tray Plate Diam Time Price ;
cards;
0	1	0	0	0	10.7	47.65	144
0	1	0	0	0	14	63.13	215
0	1	0	0	0	9	58.76	105
1	0	0	0	0	8	34.88	69
0	0	1	0	0	10	55.53	134
0	1	0	0	0	10.5	43.14	129
0	0	0	1	0	16	54.86	155
0	0	0	1	0	15	44.14	99
0	0	1	0	0	6.5	17.46	38.5
0	0	1	0	0	5	21.04	36.5
0	0	0	1	0	25	109.38	260
1	0	0	0	0	10.4	17.67	54
1	0	0	0	0	7.4	16.41	39
1	0	0	0	0	5.4	12.02	29.5
0	1	0	0	0	15.4	49.48	109
0	1	0	0	0	12.4	48.74	89.5
1	0	0	0	0	6	23.21	42
1	0	0	0	0	9	28.64	65
1	0	0	0	0	9	44.95	115
0	0	0	0	1	12.4	23.77	49.5
1	0	0	0	0	7.5	20.21	36.5
1	0	0	0	0	14	32.62	109
1	0	0	0	0	7	17.84	45
1	0	0	0	0	9	22.82	58
1	0	0	0	0	12	29.48	89
1	0	0	0	0	5.5	15.61	30
1	0	0	0	0	6	13.25	31
1	0	0	0	0	12	45.78	119
0	0	0	1	0	5.5	26.53	22
1	0	0	0	0	14.2	37.11	109
0	0	1	0	0	11	45.12	99
0	0	0	0	1	16	26.09	99
0	1	0	0	0	13.5	68.63	179
0	0	1	0	0	11.1	33.71	99
0	0	1	0	0	9.8	44.45	89
1	0	0	0	0	10	23.74	75
0	1	0	0	0	13	86.42	199
1	0	0	0	0	13	39.71	93
0	0	0	0	1	11.7	26.52	65
0	0	0	1	0	12.3	33.89	74
0	0	0	1	0	19.5	64.3	165
1	0	0	0	0	15.2	22.55	99
0	0	0	0	1	10	31.86	43.5
1	0	0	0	0	11	53.18	94
0	0	0	1	0	17.8	74.48	189
0	0	0	1	0	11.5	34.16	75
0	0	0	1	0	12.7	31.46	59.5
1	0	0	0	0	8	21.34	42
0	0	0	1	0	7.5	20.83	23
1	0	0	0	0	9	20.59	52.5
0	1	0	0	0	14	33.7	99
0	1	0	0	0	12.4	32.9	89
0	0	1	0	0	8.8	27.76	65
1	0	0	0	0	8.5	30.2	54.5
0	0	0	0	1	6	20.85	24.5
0	0	0	0	1	11	26.25	52
0	0	0	0	1	11.1	21.87	62.5
0	0	0	0	1	14.5	23.88	89
0	0	0	0	1	5	16.66	21.5
;
run;

proc print data = p011; 
run;


proc reg data = p011 ;
model Price = Bowl Casserole Dish Tray  Diam Time;
run;
* 문제 6.4;
data p188;
input W	 V	T;
cards;
48	5	50
40	10	50
35	15	50
32	20	50
30	25	50
28	30	50
27	35	50
26	40	50
25	45	50
25	50	50
36	5	40
29	10	40
23	15	40
18	20	40
15	25	40
13	30	40
11	35	40
10	40	40
9	45	40
8	50	40
27	5	30
18	10	30
10	15	30
4	20	30
-1	25	30
-5	30	30
-6	35	30
-7	40	30
-8	45	30
-9	50	30
17	5	20
5	10	20
-5	15	20
-10	20	20
-15	25	20
-18	30	20
-20	35	20
-21	40	20
-22	45	20
-23	50	20
5	5	10
-8	10	10
-18	15	10
-23	20	10
-28	25	10
-33	30	10
-35	35	10
-37	40	10
-39	45	10
-40	50	10
-5	5	0
-20	10	0
-29	15	0
-34	20	0
-38	25	0
-44	30	0
-48	35	0
-52	40	0
-54	45	0
-55	50	0
-15	5	-10
-30	10	-10
-42	15	-10
-50	20	-10
-55	25	-10
-60	30	-10
-65	35	-10
-68	40	-10
-70	45	-10
-72	50	-10
-25	5	-20
-43	10	-20
-55	15	-20
-64	20	-20
-72	25	-20
-76	30	-20
-80	35	-20
-83	40	-20
-86	45	-20
-88	50	-20
-35	5	-30
-55	10	-30
-70	15	-30
-79	20	-30
-88	25	-30
-92	30	-30
-96	35	-30
-100	40	-30
-103	45	-30
-105	50	-30
-46	5	-40
-68	10	-40
-83	15	-40
-94	20	-40
-105	25	-40
-109	30	-40
-113	35	-40
-117	40	-40
-120	45	-40
-123	50	-40
-56	5	-50
-80	10	-50
-97	15	-50
-108	20	-50
-118	25	-50
-124	30	-50
-130	35	-50
-135	40	-50
-139	45	-50
-142	50	-50
-66 	5	-60
-93	10	-60
-112	15	-60
-121	20	-60
-130	25	-60
-134	30	-60
-137	35	-60
-140	40	-60
-143	45	-60
-145	50	-60
;
run;

proc print data = p188;
run;

proc reg data = p188;
model W = V T ;
plot student.*(V T);
run;

*T효과에 대해 W를 조정한 후 W와 V 사이의 관계를 보자 ;
proc reg data = p188;
model W  = T;
output out= p188a residual=aa;
run;

proc print data = p188a;
run;

proc reg data = p188a;
model aa = V;
run;


*V효과에 대해 W를 조정한 후 W와 T 사이의 관계를 보자 ;
proc reg data = p188;
model W  = V;
output out= p188b residual=aa;
run;

proc print data = p188b;
run;

proc reg data = p188b;
model aa = T;
run;

data p188aa;
set p188;
sqrtV = sqrt(V);
run;

proc print data = p188aa;
run;
proc reg data = p188aa;
model W = T V sqrtV;
run;


data p188bb;
set p188;
x = 0.0817*(3.71*sqrt(V)+5.81-0.25*V)*(T-91.4)+91.4;
run;

proc print data = p188bb;
run;

proc reg data = p188bb;
model W = X ;
run;

*6.7번 문제 ;
data p189;
input Year Barrels;
cards;
1880	30
1890	77
1900	149
1905	215
1910	328
1915	432
1920	689
1925	1069
1930	1412
1935	1655
1940	2150
1945	2595
1950	3803
1955	5626
1960	7674
1962	8882
1964	10310
1966	12016
1968	14104
1970	16690
1972	18584
1974	20389
1976	20188
1978	21922
1980	21722
1982	19411
1984	19837
1986	20246
1988	21338
;
run;


proc print data = p189;
run;

proc plot data = p189;
plot year*barrels;
run;

data p189a;
set p189;
logbarrel = log(barrels);
run;

proc plot data = p189a;
plot year * logbarrel;
run;

proc reg data = p189a;
model logbarrel = year;
run;

proc reg data = p189;
model barrels = year;
plot rstudent. * year;
run;


*7.5 문제 ;
data p153;
input STATE$1-2 	Y 	X1 	X2 	X3 	Region  ;
cards;
ME 	235 	3944 	325 	508 	1  
NH 	231 	4578 	323 	564 	1  
VT 	270 	4011 	328 	322 	1  
MA 	261 	5233 	305 	846 	1  
RI 	300 	4780 	303 	871 	1  
CT 	317 	5889 	307 	774 	1  
NY 	387 	5663 	301 	856 	1  
NJ 	285 	5759 	310 	889 	1  
PA 	300 	4894 	300 	715 	1  
OH 	221 	5012 	324 	753 	2  
IN 	264 	4908 	329 	649 	2  
IL 	308 	5753 	320 	830 	2  
MI 	379 	5439 	337 	738 	2  
WI 	342 	4634 	328 	659 	2  
MN 	378 	4921 	330 	664 	2  
IA 	232 	4869 	318 	572 	2  
MO 	231 	4672 	309 	701 	2  
ND 	246 	4782 	333 	443 	2  
SD 	230 	4296 	330 	446 	2  
NB 	268 	4827 	318 	615 	2  
KS 	337 	5057 	304 	661 	2  
DE 	344 	5540 	328 	722 	3  
MD 	330 	5331 	323 	766 	3  
VA 	261 	4715 	317 	631 	3  
WV 	214 	3828 	310 	390 	3  
NC 	245 	4120 	321 	450 	3  
SC 	233 	3817 	342 	476 	3  
GA 	250 	4243 	339 	603 	3  
FL 	243 	4647 	287 	805 	3  
KY 	216 	3967 	325 	523 	3  
TN 	212 	3946 	315 	588 	3  
AL 	208 	3724 	332 	584 	3  
MS 	215 	3448 	358 	445 	3  
AR 	221 	3680 	320 	500 	3  
LA 	244 	3825 	355 	661 	3  
OK 	234 	4189 	306 	680 	3  
TX 	269 	4336 	335 	797 	3  
MT 	302 	4418 	335 	534 	4  
ID 	268 	4323 	344 	541 	4  
WY 	323 	4813 	331 	605 	4  
CO 	304 	5046 	324 	785 	4  
NM 	317 	3764 	366 	698 	4  
AZ 	332 	4504 	340 	796 	4  
UT 	315 	4005 	378 	804 	4  
NV 	291 	5560 	330 	809 	4  
WA 	312 	4989 	313 	726 	4  
OR 	316 	4697 	305 	671 	4  
CA 	332 	5438 	307 	909 	4  
AK 	546 	5613 	386 	484 	4 
HI 	311 	5309 	333 	831 	4  
;
run;

proc print data = p153;
run;

data p153a;
set p153;
z1 = 0;
z2 = 0 ;
z3 = 0;
if region = 1 then z1 = 1;
else z1 = 0;

if region =2 then z2 =1 ;
else z2 = 0;

if region =3 then z3 =1 ;
else z3 = 0;
run;

proc print data = p153a;
run;

proc reg data = p153a;
model Y = X1 X2 X3 z1 z2 z3;
run;
